{% extends 'base.html' %}
{% block title %}
    Your todo list
{% endblock %}
{% block content %}
    <div>
        <div>
            <b>
                Hello {{ user.username }}
            </b>&nbsp;|&nbsp;
            <a href="{% url 'django.contrib.auth.views.logout' %}?next=/">
                Logout
            </a>
        </div>
    </div>
    <div>
        <h3>
            Add todo
        </h3>
        <form id="form_add_job" action="" method="post">
            <label>Job</label>
            <p><textarea rows="3" cols="45" name="job"></textarea></p>
            <label>Deadline</label>
            <p><input type="date" name="deadline"></p>
            {% csrf_token %}
        </form>
    </div>
    <div>
        <table width="100%" id="todo_table" cellpadding="5">
            <tr class="table_header">
                <td width="20%">DeadLine</td>
                <td width="70%">Job</td>
            </tr>
            {% for todo in todoList %}
                {% if todo.completed %}
                    <tr class="strikeout todo_complete">
                {% else %}
                    <tr class="todo_active">
                {% endif %}
                    <td>
                        {{ todo.deadline_date|date:"Y-m-d" }}
                    </td>
                    <td>
                        {{ todo.todo_job }}
                    </td>
                    <td>
                        {% if todo.completed %}
                            <input type="checkbox" name="completed" checked data-id="{{ todo.id }}">
                        {% else %}
                            <input type="checkbox" name="completed" data-id="{{ todo.id }}">
                        {% endif %}
                    </td>
                    <td>
                        <input type="button" name="delete" value="Delete" data-id="{{ todo.id }}">
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}